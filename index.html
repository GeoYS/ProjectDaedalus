<html>

<header>
	<script src="jquery-2.2.4.min.js"></script>
	<script src="knockout-3.4.0.js"></script>
	<script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>
	<script>
	  // Initialize Firebase
	  var config = {
		apiKey: "AIzaSyDjujhrawjD7SYiQV9axXI31yAySAC_Zfw",
		authDomain: "project-828640652417633159.firebaseapp.com",
		databaseURL: "https://project-828640652417633159.firebaseio.com",
		storageBucket: "",
	  };
	  firebase.initializeApp(config);
	</script>
</header>
<body>
	<p id="numPlayers">Number of players:</p>
	<p id="playersInLobby">Players in lobby: </p>
	<input type="text" id="name"></input>
	<input type="button" onclick="join()" value="Join">
	<script type="text/javascript">
		firebase.auth().signInAnonymously().catch(function(error) {
			alert("ERROR IN AUTHENTICATION!!!");
		});
		var numPlayers = firebase.database().ref('game/lobby/numPlayers').on('value', function(snapshot) {
			var numPlayers = snapshot.val();
			$('#numPlayers').html('Number of players: ' + numPlayers);
		});
		
		var playersInLobby = firebase.database().ref('game/lobby/players').on('child_added', function(snapshot) {
			var newPlayer = snapshot.val();
			$('#playersInLobby').html().append(' ' + newPlayer.name);
		});
		
		function join() {
			var numPlayers = firebase.database().ref('game/lobby/request/' + $('#name').val()).set({
				name: $('#name').val()
			})
		}
	</script>
</body>

</html>