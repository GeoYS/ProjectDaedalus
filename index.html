<html>

<header>
	<script src="jquery-2.2.4.min.js"></script>
	<script src="knockout-3.4.0.js"></script>
	<script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>
	<script>
	  // Initialize Firebase
	  var config = {
		apiKey: "AIzaSyDjujhrawjD7SYiQV9axXI31yAySAC_Zfw",
		authDomain: "project-828640652417633159.firebaseapp.com",
		databaseURL: "https://project-828640652417633159.firebaseio.com",
		storageBucket: "",
	  };
	  firebase.initializeApp(config);
	</script>
	.grassland {
		background-color: lightgreen;
	}
	.water {
		background-color: lightblue;
	}
	<style>
	</style>
</header>
<body>
	<div id="main" style="overflow: hidden">
		<p id="mapDimensions"></p>
		<div id="map" style="z-index: -1; position: absolute; left: 100px; top: 100px;">	
		</div>
		<p id="numPlayers">Number of players:</p>
		<p id="playersInLobby">Players in lobby: </p>
		<input type="text" id="name"></input>
		<input type="button" onclick="join()" value="Join">
	</div>
	<script type="text/javascript">
		var database = firebase.database();
	
		firebase.auth().signInAnonymously().catch(function(error) {
			alert("ERROR IN AUTHENTICATION!!!");
		});
		var numPlayers = database.ref('game/lobby/numPlayers').on('value', function(snapshot) {
			var numPlayers = snapshot.val();
			$('#numPlayers').html('Number of players: ' + numPlayers);
		});
		
		var playersInLobby = database.ref('game/lobby/players').on('child_added', function(snapshot) {
			var newPlayer = snapshot.val();
			$('#playersInLobby').append(' ' + newPlayer.name);
		});
		
		function join() {
			var numPlayers = database.ref('game/lobby/request/' + $('#name').val()).set({
				name: $('#name').val()
			});
			$('#name').val('');
		}
		
		database.ref('game/world/map').on('value', function(snapshot) {
			var map = snapshot.val();
			var tilesWide = map['tilesWide'];
			var tilesHigh = map['tilesHigh'];
			var mapDiv = $('#map');
			
			$('#mapDimensions').html('Map dimensions: ' + tilesWide + 'x' + tilesHigh);
			
			for(int y = 0; y < tilesHigh; y ++) {
				$('#map').append('<div id=\'row' + y + '\'></div>');
				for(int x = 0; x < tilesWide; x ++) {
				var coord = x + ',' + y;
					$('#row' + y).append('<div class=\'' + map['tiles'][coord]['properties']['tileType'] + '\' ' + 'id=\'' + coord + '\'></div>');
				}
			}
		});
	</script>
</body>

</html>